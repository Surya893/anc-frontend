<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>ANC System Control</title>
    <link rel="stylesheet" href="/src/styles/main.css">
</head>

<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>ANC Control Panel</h1>
            <div class="status-indicator">
                <span class="status-dot"></span>
                <span class="status-text">Disconnected</span>
            </div>
        </header>

        <!-- Main Grid -->
        <div class="grid">
            <!-- ANC Control -->
            <div class="card">
                <div class="card-header">
                    <h2>System Control</h2>
                    <label class="switch">
                        <input type="checkbox" id="ancToggle" onclick="toggleANC()">
                        <span class="slider round"></span>
                    </label>
                </div>
                <div class="control-group">
                    <label>Noise Threshold: <span id="thresholdValue">50s</span></label>
                    <input type="range" min="1" max="60" value="5" class="range-slider" id="thresholdSlider"
                        oninput="updateThreshold(this.value)">
                </div>
                <div class="control-group">
                    <label class="checkbox-container">
                        Prolonged Usage Mode
                        <input type="checkbox" id="prolongedToggle" onchange="toggleProlonged(this.checked)">
                        <span class="checkmark"></span>
                    </label>
                </div>
            </div>

            <!-- Intensity & Detection -->
            <div class="card">
                <div class="card-header">
                    <h2>Configuration</h2>
                </div>
                <div class="control-group">
                    <label>ANC Intensity: <span id="intensityValue">80%</span></label>
                    <input type="range" min="0" max="100" value="80" class="range-slider" id="intensitySlider"
                        oninput="updateIntensity(this.value)">
                </div>
                <div class="detection-info">
                    <div class="info-row">
                        <span>Detected:</span>
                        <strong id="detectionClass">None</strong>
                    </div>
                    <div class="info-row">
                        <span>Confidence:</span>
                        <strong id="detectionConfidence">0%</strong>
                    </div>
                </div>
            </div>

            <!-- Stats Card -->
            <div class="card">
                <div class="card-header">
                    <h2>Statistics</h2>
                    <button class="btn-text" onclick="resetStats()">Reset</button>
                </div>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-value" id="statDetections">0</div>
                        <div class="stat-label">Detections</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="statUptime">0m</div>
                        <div class="stat-label">Uptime</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Emergency Alerts -->
        <div class="alert-section" id="emergencyAlert" style="display: none;">
            <div class="alert-content">
                <span class="alert-icon">⚠️</span>
                <div class="alert-text">
                    <h3>Emergency Siren Detected</h3>
                    <p>ANC has been automatically disabled for safety.</p>
                </div>
                <div class="alert-actions">
                    <button class="btn btn-danger" onclick="dismissEmergency()">Dismiss</button>
                    <button class="btn btn-secondary" onclick="acknowledgeEmergency()">Keep ANC Off</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toast-container"></div>

    <!-- Scripts -->
    <script type="module" src="/src/main.js"></script>
</body>

</html>